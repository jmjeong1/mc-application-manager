import{c as E,I as U}from"./IconPlus-CVN_oQZM.js";import{e as R,q as B,l as P,I as O,A as G}from"./softwareCatalogForm.vue_vue_type_style_index_0_scoped_c6733d12_lang-BWePdPX9.js";import{d as D,c as I,a as l,b as t,t as m,h as n,r,w as L,o as M,i as w,p as T,j as x,F as k,f as S,u as N,l as j}from"./index-BHPkE3P8.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as H}from"./lodash-kZgskVh2.js";import"./request-DJv9NrOs.js";/**
 * @license @tabler/icons-vue v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var z=E("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);const F={class:"card mb-3"},K={class:"grid"},q={class:"g-col-5"},J=["src"],Y={class:"col-auto text-muted",style:{"align-items":"center"}},Q={class:"col g-col-7"},W={class:"text-muted mt-3",style:{height:"50px"}},X=D({__name:"softwareCatalogCard",props:{catalogInfo:{},idx:{}},emits:["set-software-catalog-refrence"],setup(C,{emit:y}){const d=C,p=y,e=I(()=>d.catalogInfo),a=I(()=>d.idx),b=async u=>{p("set-software-catalog-refrence",u)};return(u,h)=>(n(),l("div",F,[t("div",{class:"card-body cursor-pointer",onClick:h[0]||(h[0]=g=>b(a.value))},[t("div",K,[t("div",q,[t("img",{src:e.value.catalogIcon,class:"rounded mb-3",alt:"Catalog Icon",width:"50",height:"50",style:{"margin-left":"5px"}},null,8,J),t("div",Y,m(e.value.catalogCategory),1)]),t("div",Q,[t("div",null,[t("b",null,m(e.value.catalogTitle),1),t("div",W,m(e.value.catalogSummary),1)])])])])]))}}),Z={class:"modal",id:"software-card-detail",tabindex:"-1"},tt={class:"modal-dialog modal-lg",role:"document"},st={class:"modal-content"},ot={class:"modal-header"},at={class:"modal-title"},et={class:"modal-body",style:{"max-height":"calc(100vh - 200px)","overflow-y":"auto"}},lt={class:"datagrid"},nt={class:"datagrid-item"},dt={class:"d-flex justify-content-space-between"},it={class:"col-lg-11 d-flex justify-content-start mb-5"},ct={class:"me-30",style:{"margin-right":"30px"}},rt=["src"],ut={class:"col-auto text-muted",style:{"align-items":"center"}},_t={class:"mt-3"},vt={class:"text-muted"},mt={class:"col-lg-1 lh-1"},gt={class:"dropdown"},pt={href:"#",class:"link-secondary","data-bs-toggle":"dropdown"},ht={class:"dropdown-menu dropdown-menu-end"},ft={class:"pt-0"},bt=["innerHTML"],yt={class:"datagrid"},wt={class:"datagrid-item mb-5"},Ct={class:"datagrid-content"},$t=["onClick"],xt={class:"datagrid-item"},kt={class:"datagrid-content"},It={key:0},St={class:"d-inline"},Dt={class:"datagrid"},Tt={class:"datagrid-item mb-5"},Lt={class:"datagrid-content"},Mt={class:"btn btn-sm",style:{"margin-right":"5px"}},Nt={class:"btn btn-sm",style:{"margin-right":"5px"}},jt={class:"btn btn-sm",style:{"margin-right":"5px"}},At={class:"footer"},Et={class:"col-auto me-auto fs-3"},Ut={class:"d-flex justify-content-center"},Rt=D({__name:"softwareCatalogCardDetail",props:{catalogIdx:{}},emits:["set-software-catalog-refrence","on-click-deploy"],setup(C,{emit:y}){const d=C,p=y,e=I(()=>d.catalogIdx),a=r({});L(()=>e.value,async()=>{await b(e.value)}),M(async()=>{await b(e.value)});const b=async i=>{await R(Number(i)).then(({data:s})=>{const o=window.location.host.split(":"),v=window.location.protocol+"//"+o[0]+":18084";s.catalogIcon=v+s.catalogIcon,a.value=s})},u=r("new"),h=i=>{u.value="update"},g=i=>i===void 0?"":i.replace(/\\n|\n/g,"<br/>"),_=(i,s)=>i===void 0?null:Object.prototype.hasOwnProperty.call(i,s),f=i=>{window.open(i)},$=i=>{p("on-click-deploy",i)};return(i,s)=>{var o,v;return n(),l("div",Z,[t("div",tt,[t("div",st,[t("div",ot,[t("h5",at,m(a.value.catalogTitle),1),s[3]||(s[3]=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),t("div",et,[t("div",lt,[t("div",nt,[t("div",dt,[t("div",it,[t("div",ct,[t("img",{src:a.value.catalogIcon,class:"rounded mb-3",alt:"Catalog Icon",width:"50",height:"50",style:{"margin-left":"5px"}},null,8,rt),t("div",ut,m(a.value.catalogCategory),1)]),t("div",_t,[t("b",null,m(a.value.catalogTitle),1),t("div",vt,m(a.value.catalogSummary),1)])]),t("div",mt,[t("div",gt,[t("a",pt,[w(T(z),{class:"icon icon-tabler",color:"black",size:20,"stroke-width":"2"})]),t("div",ht,[t("a",{class:"dropdown-item",onClick:s[0]||(s[0]=c=>h(a.value.catalogIdx||0)),"data-bs-toggle":"modal","data-bs-target":"#modal-form"},"Update")])])])])])]),t("div",ft,[t("div",{class:"mb-5",style:{"white-space":"pre-wrap"},innerHTML:g(a.value.catalogDescription||"")},null,8,bt),t("div",yt,[t("div",wt,[s[4]||(s[4]=t("div",{class:"datagrid-title"},"Ref Information",-1)),t("div",Ct,[_(a.value.refData,"HOMEPAGE")?(n(!0),l(k,{key:0},S((o=a.value.refData)==null?void 0:o.HOMEPAGE,c=>(n(),l("div",{key:c},[t("a",{onClick:A=>f(c),class:"btn"},m(c),9,$t)]))),128)):x("",!0)])]),t("div",xt,[s[5]||(s[5]=t("div",{class:"datagrid-title"},"TAGS",-1)),t("div",kt,[_(a.value.refData,"TAG")?(n(),l("div",It,[(n(!0),l(k,null,S((v=a.value.refData)==null?void 0:v.TAG,c=>(n(),l("div",{class:"d-inline",key:c},[t("div",St,[t("span",null,"#"+m(c)+"  ",1)])]))),128))])):x("",!0)])])]),t("div",Dt,[t("div",Tt,[s[6]||(s[6]=t("div",{class:"datagrid-title"},"Recommended Spec",-1)),t("div",Lt,[a.value.recommendedCpu&&a.value.recommendedMemory&&a.value.recommendedDisk?(n(),l(k,{key:0},[t("button",Mt," CPU : "+m(a.value.recommendedCpu),1),t("button",Nt," MEMORY : "+m(a.value.recommendedMemory),1),t("button",jt," DISK : "+m(a.value.recommendedDisk),1)],64)):x("",!0)])])])])]),t("div",At,[t("div",Et,[t("div",Ut,[t("button",{class:"btn btn-primary me-md-2 mb-2","data-bs-toggle":"modal","data-bs-target":"#install-form",onClick:s[1]||(s[1]=c=>$("Application Installation"))},"INSTALL"),t("button",{class:"btn btn-danger me-md-2 mb-2","data-bs-toggle":"modal","data-bs-target":"#install-form",onClick:s[2]||(s[2]=c=>$("Application Uninstallation"))},"UNINSTALL")])])])])])])}}}),Bt=V(Rt,[["__scopeId","data-v-b5738534"]]),Pt={class:"modal fade",id:"softwareCatalogLog",tabindex:"-1"},Ot={class:"modal-dialog modal-xl",role:"document"},Gt={class:"modal-content"},Vt={class:"modal-body text-left py-4"},Ht={class:"mb-5"},zt={key:0,class:"spinner-border",role:"status"},Ft={key:0},Kt={class:"card mb-3"},qt=["onClick"],Jt={class:"card-title"},Yt={key:0,class:"card-body"},Qt=["value"],Wt=D({__name:"softwareCatalogLog",props:{jobName:{}},setup(C){N();const y=C,d=r(!1),p=I(()=>y.jobName);L(p,async()=>{d.value=!1,await a()});const e=r([]),a=async()=>{e.value=[];const g=await B(p.value);e.value=g.data.data,d.value=!0},b=()=>{e.value=[],u.value=1},u=r(1),h=g=>{u.value===g?u.value=0:u.value=g};return(g,_)=>(n(),l("div",Pt,[t("div",Ot,[t("div",Gt,[_[3]||(_[3]=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),t("div",Vt,[t("h3",Ht,[_[1]||(_[1]=j(" Build Log ")),d.value?x("",!0):(n(),l("div",zt,_[0]||(_[0]=[t("span",{class:"visually-hidden"},"Loading...",-1)])))]),t("div",null,[e.value.length<=0?(n(),l("div",Ft,_[2]||(_[2]=[t("p",{class:"text-secondary"},"No Data",-1)]))):(n(!0),l(k,{key:1},S(e.value,f=>(n(),l("div",{key:f.buildIdx},[t("div",Kt,[t("div",{class:"card-header",onClick:$=>h(f.buildIdx),style:{cursor:"pointer"}},[t("h3",Jt,m(f.buildIdx),1)],8,qt),u.value===f.buildIdx?(n(),l("div",Yt,[t("textarea",{value:f.buildLog,disabled:"",style:{width:"100%"},rows:"20"},null,8,Qt)])):x("",!0)])]))),128))])]),t("div",{class:"modal-footer"},[t("a",{class:"btn btn-link link-secondary","data-bs-dismiss":"modal",onClick:b}," Cancel ")])])])]))}}),Xt={class:"page",ref:"sofwareCatalog"},Zt={class:"page-wrapper"},ts={class:"page-header d-print-none"},ss={class:"container-xl"},os={class:"row g-2 align-items-center"},as={class:"col-auto ms-auto d-print-none"},es={class:"d-flex"},ls={class:"me-3 d-none d-md-block"},ns={class:"input-icon"},ds={class:"input-icon-addon"},is={class:"col-auto ms-auto"},cs={class:"btn-list"},rs={class:"page-body"},us={class:"container-xl"},_s={class:"row"},vs={class:"col-auto"},ms={class:"card bg-color-white"},gs={class:"card-body"},ps={class:"row row-deck"},hs={class:"w-100"},xs=D({__name:"SoftwareCatalogListTest",setup(C){const y=N(),d=r([]),p=r("");r([]),r([]);const e=r(0),a=r(""),b=r("new"),u=r("");r("ns01");const h=r("");M(async()=>{p.value="",window.addEventListener("message",async function(s){const o=s.data;o.projectInfo&&(u.value=o.projectInfo.ns_id)}),await g()});const g=async()=>{try{const s=await P(p.value);H.forEach(s.data,function(o){const v=window.location.host.split(":"),c=window.location.protocol+"//"+v[0]+":18084";o.catalogIcon=c+o.catalogIcon,o.refData=_(o.catalogRefData),o.isShow=!1}),d.value=s.data}catch(s){console.log(s),y.error("데이터를 가져올 수 없습니다.")}},_=s=>s.reduce((o,v)=>(o[v.referenceType]||(o[v.referenceType]=[]),o[v.referenceType].push(v),o),{}),f=async s=>{e.value=s,d.value.forEach(o=>{o.isShow=!1}),d.value[s].isShow=!d.value[s].isShow},$=()=>{b.value="new",e.value=0},i=s=>{h.value=s};return(s,o)=>(n(),l("div",Xt,[t("div",Zt,[t("div",ts,[t("div",ss,[t("div",os,[o[2]||(o[2]=t("div",{class:"col d-flex"},[t("h2",{class:"page-title"},"Software catalog")],-1)),t("div",as,[t("div",es,[t("div",ls,[t("div",ns,[o[0]||(o[0]=t("input",{type:"text",class:"form-control",placeholder:"Search…"},null,-1)),t("span",ds,[w(T(O),{class:"icon icon-tabler icon-tabler-search",size:24})])])])])]),t("div",is,[t("div",cs,[t("a",{class:"btn btn-primary d-none d-sm-inline-block",onClick:$,"data-bs-toggle":"modal","data-bs-target":"#modal-form"},[w(T(U),{class:"icon icon-tabler icon-tabler-plus",color:"white",size:20,"stroke-width":"2"}),o[1]||(o[1]=j(" New "))])])])])])]),t("div",rs,[t("div",us,[t("div",_s,[t("div",vs,[t("div",ms,[t("div",gs,[t("div",ps,[(n(!0),l(k,null,S(d.value,(v,c)=>(n(),l("div",{class:"col-md-4",key:c,style:{width:"33%",display:"flex","justify-content":"space-between"}},[t("div",hs,[w(X,{"catalog-info":v,idx:c,"data-bs-toggle":"modal","data-bs-target":"#software-card-detail",onSetSoftwareCatalogRefrence:A=>f(c)},null,8,["catalog-info","idx","onSetSoftwareCatalogRefrence"])])]))),128))])])])])])])])]),w(Wt,{"job-name":a.value},null,8,["job-name"]),w(G,{"ns-id":u.value,title:h.value,"catalog-list":d.value},null,8,["ns-id","title","catalog-list"]),w(Bt,{"catalog-idx":e.value+1,onOnClickDeploy:i},null,8,["catalog-idx"])],512))}});export{xs as default};
